<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>ReadFast</title>
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">

    <style type='text/css'>
    body {
        font-family: "Courier New";
        font-size: 20pt;
    }
    .orp {
        color:red;
    }
    </style>

    <script type='text/javascript'>
        // TODO
        // * print orp character in same position every time
        // * stop
        // * pause
        // * error handling
        //      * don't count punctuation
        //      * non digits in wpm field
        $(function() {
            $("#start").click( function() {
                var wpm=$("#wpm").val();
                var text = $("#words").val();
                var res = text.split(" ");
                var i = 0;
                var len = 0;
                var orp = 0;

                var millisecs = parseInt(1000/(wpm/60)); // wpm to milliseconds
                setInterval(function() {
                    $('#reader').html('<span id="orp"></span>');

                    len=res[i].length;
                    if (len == 1) { orp=0; } else { orp=Math.floor(len/2)-1; };

                    $('#orp').text(res[i].charAt(orp)).css('color', 'red');

                    for (var j = orp+1; j <= len; j++) {
                        $('#reader').append(res[i].charAt(j));
                    };
                    for (var k = orp-1; k >= 0; k--) {
                        $('#reader').prepend(res[i].charAt(k));
                    };
                    i=i+1;
                }, millisecs);
            });
        });
    </script>
</head>
<body>
    <center><span id="reader"><span id="orp">Welcome to READFAST</span></span></center>
    WPM:<BR>
    <input type="textbox" id="wpm" value="100"></input><BR>
    TEXT:<BR>
    <textarea id="words" rows="10" cols="50">At w3schools.com you will learn how to make a website. We offer free tutorials in all web development technologies.
    </textarea><BR>
    <button id="start">Start</button>
</body>
</html>
